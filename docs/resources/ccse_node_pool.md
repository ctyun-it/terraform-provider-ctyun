# ctyun_ccse_node_pool (Resource)
-> 详细说明请见文档：https://www.ctyun.cn/document/10083472/10318452



## Example

```terraform
terraform {
  required_providers {
    ctyun = {
      source = "ctyun-it/ctyun"
    }
  }
}

# 可参考index.md，在环境变量中配置ak、sk、资源池ID、可用区名称
provider "ctyun" {
  env = "prod"
}

data "ctyun_ecs_flavors" "ecs_flavor_test" {
  cpu    = 4
  ram    = 8
  arch   = "x86"
  series = "C"
  type   = "CPU_C7"
}

resource "ctyun_ccse_node_pool" "example" {
  cluster_id               = "dd92f3a6b034431bb7dceb849aed1220"
  name           = "default-pool"
  cycle_type              = "month"
  cycle_count = 1
  auto_renew = true
  instance_type            = "ecs"
  mirror_id                = "3f80d8c0-8eb5-4afa-a506-13ba68b61872"
  mirror_type              = 1
  key_pair_name           = "KeyPair-de15"
  use_affinity_group       = true
  affinity_group_id      = "f8b18511-4327-4c3f-9373-c6d661889fcb"
  item_def_name            = data.ctyun_ecs_flavors.ecs_flavor_test.flavors[0].name
  max_pod_num              = 110
  az_infos = [
    {
      az_name = "cn-huadong1-jsnj1A-public-ctcloud"
    }
  ]
  sys_disk = {
    type = "SATA"
    size = 300
  }

  data_disks = [
    {
      type = "SSD"
      size = 4000
    }
  ]
}

# 裸金属节点池（physical.s5.2xlarge4不支持云硬盘）
# resource "ctyun_ccse_node_pool" "example" {
#   cluster_id               = "dd92f3a6b034431bb7dceb849aed1220"
#   name           = "default-pool1"
#   cycle_type              = "month"
#   cycle_count = 1
#   auto_renew = true
#   instance_type            = "ebm"
#   mirror_name             = "CTyunOS23.01@cpu_ccse_img_4.0_09"
#   mirror_type              = 1
#   key_pair_name           = "KeyPair-de15"
#   use_affinity_group       = true
#   affinity_group_id      = "f8b18511-4327-4c3f-9373-c6d661889fcb"
#   item_def_name            = "physical.s5.2xlarge4"
#   max_pod_num              = 110
#   az_infos = [
#     {
#       az_name = "cn-huadong1-jsnj1A-public-ctcloud"
#     }
#   ]
# }
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `az_infos` (Attributes List) 可用区信息，支持的可用区可通过ctyun_regions查询 (see [below for nested schema](#nestedatt--az_infos))
- `cluster_id` (String) 集群ID
- `cycle_type` (String) 订购周期类型，取值范围：month：按月，year：按年、on_demand：按需。当此值为month或者year时，cycle_count为必填，支持更新
- `instance_type` (String) 实例类型，支持ecs（云主机）、ebm（裸金属）
- `item_def_name` (String) 实例规格名称，使用至少4C8G以上的规格，云主机规格通过ctyun_ecs_flavors查询，裸金属规格通过ctyun_ebm_device_types查询
- `mirror_type` (Number) 镜像类型，支持传0（私有），1（公有），可查看<a href="https://www.ctyun.cn/document/10026730/10030151">镜像概述</a>
- `name` (String) 节点池名称，支持更新

### Optional

- `affinity_group_id` (String) 云主机组id
- `auto_renew` (Boolean) 是否自动续订，默认非自动续订，当cycle_type不等于on_demand时才可填写，支持更新
- `cycle_count` (Number) 订购时长，该参数在cycle_type为month或year时才生效，当cycle_type=month，支持订购1-11个月；当cycle_type=year，支持订购1-5年，支持更新
- `data_disks` (Attributes List) 数据盘信息，支持更新 (see [below for nested schema](#nestedatt--data_disks))
- `key_pair_name` (String) 密钥对名称，与password有且只能有一个
- `max_pod_num` (Number) 最大pod数, 默认110
- `mirror_id` (String) 镜像id，实例为ecs类型必填，可查看<a href="https://www.ctyun.cn/document/10083472/11004475">节点规格和节点镜像</a>
- `mirror_name` (String) 镜像名称，实例为ebm类型必填，可查看<a href="https://www.ctyun.cn/document/10083472/11004475">节点规格和节点镜像</a>
- `node_num` (Number) 节点数，不填则默认为0，支持更新，创建节点池后只能增加不能减少
- `password` (String, Sensitive) 用户密码，与key_pair_name有且只能有一个，需要满足以下规则：长度在8～30个字符；必须包含大写字母、小写字母、数字以及特殊符号中的三项；特殊符号可选：()`~!@#$%^&*_-+=|{}[]:;'<>,.?/\且不能以斜线号/开头
- `region_id` (String) 资源池ID，如果不填则默认使用provider ctyun中的region_id或环境变量中的CTYUN_REGION_ID
- `sys_disk` (Attributes) 系统盘信息 (see [below for nested schema](#nestedatt--sys_disk))
- `use_affinity_group` (Boolean) 是否使用主机组，默认不使用
- `visibility_host_script` (String) 部署前执行自定义脚本，base64编码，支持更新
- `visibility_post_host_script` (String) 部署后执行自定义脚本，base64编码，支持更新

### Read-Only

- `id` (String) ID

<a id="nestedatt--az_infos"></a>
### Nested Schema for `az_infos`

Required:

- `az_name` (String) 可用区编码


<a id="nestedatt--data_disks"></a>
### Nested Schema for `data_disks`

Required:

- `type` (String) 数据盘类型，支持SATA、SAS、SSD，支持更新

Optional:

- `size` (Number) 数据盘大小，单位为G，支持范围10-20000，支持更新


<a id="nestedatt--sys_disk"></a>
### Nested Schema for `sys_disk`

Required:

- `size` (Number) 系统盘大小，单位为G，支持范围40-2040，支持更新
- `type` (String) 系统盘类型，支持SATA、SAS、SSD，支持更新