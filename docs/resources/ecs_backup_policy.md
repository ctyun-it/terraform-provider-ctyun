# ctyun_ecs_backup_policy (Resource)
-> 详细说明请见文档：https://www.ctyun.cn/document/10026751/10033770



## Example

```terraform
terraform {
  required_providers {
    ctyun = {
      source = "ctyun-it/ctyun"
    }
  }
}

# 可参考index.md，在环境变量中配置ak、sk、资源池ID、可用区名称
provider "ctyun" {
  env = "prod"
}

resource "ctyun_ecs_backup_policy" "test" {
    name           = "test"
    cycle_type            = "week"
    cycle_week            = "0,2,6"
    time                  = "1,20"
    status                = 1
    retention_type        = "num"
    retention_num         = 20
    full_backup_interval  = -1
    adv_retention_status  = true

    # 当启用高级保留策略且retention_type为num时，可以配置高级保留策略
    adv_retention {
     adv_day = 3
    }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cycle_type` (String) 云主机备份周期类型，取值范围：day（按天备份）week（按星期备份）。支持更新
- `name` (String) 云主机备份策略名称。满足以下规则：只能由数字、英文字母、中划线-、下划线_、点.组成，长度为2-64字符。注：在所有资源池不可重复。支持更新
- `retention_type` (String) 云主机备份保留类型，取值范围：date（按时间保存），num（按数量保存），all（永久保存）。支持更新

### Optional

- `adv_retention` (Block, Optional) 高级保留策略内容，只有retentionType为num且advRetentionStatus为true才生效。支持更新 (see [below for nested schema](#nestedblock--adv_retention))
- `adv_retention_status` (Boolean) 是否开启高级保留策略，false（不启用），true(启用)，默认值为false。需校验云主机备份保留类型（retentionType），若保留类型为按数量保存（num），可开启高级保留策略；若保留类型为date（按时间保存）或all（永久保存），不可开启高级保留策略。支持更新
- `cycle_day` (Number) 备份周期（天），取值范围：[1, 30]，默认值为1。注：只有cycleType为day时有效。支持更新
- `cycle_week` (String) 备份周期（星期），星期取值范围：0~6（代表周几，其中0为周日），默认值是0。注：只有cycleType为week时有效；如果一周有多天备份，以逗号隔开（如周日周三进行快照，则填写"0,3"）。支持更新
- `full_backup_interval` (Number) 是否启用周期性全量备份。-1代表不开启，默认为-1；取值范围为[-1,100]，即每执行n次增量备份后，执行一次全量备份；若传入为0，代表每一次均为全量备份。支持更新
- `project_id` (String) 企业项目ID，企业项目管理服务提供统一的云资源按企业项目管理，以及企业项目内的资源管理，成员管理。您可以通过查看创建企业项目了解如何创建企业项目。注：默认值为"0"
- `region_id` (String) 资源池ID，如果不填则默认使用provider ctyun中的region_id或环境变量中的CTYUN_REGION_ID
- `retention_day` (Number) 云主机备份保留天数，单位为天，取值范围：[1, 99999] ，默认值1。注：只有retentionType为date时有效。支持更新
- `retention_num` (Number) 云主机备份保留数量，取值范围：[1, 99999]，默认值1。注：只有retentionType为num时有效。支持更新
- `status` (Number) 备份策略状态，是否启用，取值范围：0（不启用），1（启用）。注：默认值0（不启用）。支持更新
- `time` (String) 备份整点时间，时间取值范围：0~23。注：如果一天内多个时间节点备份，以逗号隔开（如11点15点进行快照，则填写"11,15"），默认值12 。支持更新

### Read-Only

- `id` (String) 云主机备份策略id
- `repository_list` (Attributes List) 策略已绑定的云主机备份库列表 (see [below for nested schema](#nestedatt--repository_list))
- `resource_ids` (String) 策略已绑定的云主机ID，以逗号分隔

<a id="nestedblock--adv_retention"></a>
### Nested Schema for `adv_retention`

Optional:

- `adv_day` (Number) 保留n天内，每天最新的一个备份，n为输入的数字。单位为天，取值范围：[0, 100]，默认值0 支持更新
- `adv_month` (Number) 保留n月内，每月最新的一个备份，n为输入的数字。单位为月，取值范围：[0, 100]，默认值0 支持更新
- `adv_week` (Number) 保留n周内，每周最新的一个备份，n为输入的数字。单位为周，取值范围：[0, 100]，默认值0 支持更新
- `adv_year` (Number) 保留n年内，每年最新的一个备份，n为输入的数字。单位为年，取值范围：[0, 100]，默认值0 支持更新


<a id="nestedatt--repository_list"></a>
### Nested Schema for `repository_list`

Read-Only:

- `repository_id` (String) 云主机备份库ID
- `repository_name` (String) 云主机备份库名称