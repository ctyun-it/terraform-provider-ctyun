# ctyun_redis_instance (Resource)
-> 详细说明请见文档：https://www.ctyun.cn/document/10029420/10029727



## Example

```terraform
terraform {
  required_providers {
    ctyun = {
      source = "ctyun-it/ctyun"
    }
  }
}

# 可参考index.md，在环境变量中配置ak、sk、资源池ID、可用区名称
provider "ctyun" {
  env = "prod"
}

variable "password" {
  type      = string
  sensitive = true
}

resource "ctyun_vpc" "vpc_test" {
  name        = "tf-vpc-re"
  cidr        = "192.168.0.0/16"
  description = "terraform测试使用"
  enable_ipv6 = true
}

resource "ctyun_subnet" "subnet_test" {
  vpc_id = ctyun_vpc.vpc_test.id
  name        = "tf-subnet-re"
  cidr        = "192.168.1.0/24"
  description = "terraform测试使用"
  dns         = [
    "114.114.114.114",
    "8.8.8.8",
    "8.8.4.4"
  ]
  enable_ipv6 = true
}

resource "ctyun_security_group" "security_group_test" {
  vpc_id = ctyun_vpc.vpc_test.id
  name        = "tf-sg-re"
  description = "terraform测试使用"
}

# 按需
# resource "ctyun_redis_instance" "tbidgqvfbs" {
#   instance_name = "tf-redis-32cbppywerkb"
#   version = "BASIC"
#   edition = "StandardSingle"
#   password = var.password
#   engine_version = "7.0"
#   maintenance_time = "02:00-04:00"
#   protection_status = false
#   shard_mem_size = 8
#   vpc_id = "vpc-ewivt5nhiz"
#   subnet_id = "subnet-vhyywu7mfe"
#   security_group_id = "sg-ed9i3c98t2"
#   cycle_type = "on_demand"
# }

# 包周期
resource "ctyun_redis_instance" "tbidgqvfbs" {
  instance_name = "tf-redis-1cbppywerkb"
  version = "BASIC"
  edition = "StandardSingle"
  password = var.password
  engine_version = "7.0"
  maintenance_time = "02:00-04:00"
  protection_status = false
  shard_mem_size = 8
  vpc_id = ctyun_vpc.vpc_test.id
  subnet_id = ctyun_subnet.subnet_test.id
  security_group_id = ctyun_security_group.security_group_test.id
  cycle_type = "month"
  cycle_count = 1
  auto_renew = true
  auto_renew_cycle_count = 12
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cycle_type` (String) 订购周期类型，取值范围：month：按月，on_demand：按需。当此值为month时，cycle_count为必填
- `edition` (String) 实例类型，SeriesInfo中的seriesCode值，可参考<a href="https://www.ctyun.cn/document/10029420/11030280">产品规格说明</a>
- `engine_version` (String) Redis引擎版本，SeriesInfo中的engineTypeItems(引擎版本可选值)，当version取值为BASIC时，版本号取值：5.0，6.0，7.0，当version取值为PLUS，版本号取值：6.0，7.0，支持更新
- `instance_name` (String) 实例名称，大小写字母开头。只能包含大小写字母、数字及分隔符(-)。大小写字母或数字结尾。长度4~40个字符。实例名称不可重复。
- `password` (String, Sensitive) 实例密码。长度8-26字符。必须同时包含大写字母、小写字母、数字、英文格式特殊符号(@%^*_+!$-=.)中的三种类型。不能有空格。支持更新
- `security_group_id` (String) 安全组ID
- `shard_mem_size` (Number) 分片规格，当version取值为BASIC，取值：1、2、4、8、16、32、64，当version取值为PLUS时，取值：8、16、32、64
- `subnet_id` (String) 子网ID
- `vpc_id` (String) 虚拟私有云ID

### Optional

- `auto_renew` (Boolean) 是否自动续订，默认非自动续订，当cycle_type不等于on_demand时才可填写
- `auto_renew_cycle_count` (Number) 自动续订时长，单位月，支持1, 2, 3, 5, 6, 7, 12, 24, 36
- `az_name` (String) 主可用区，如果不填则默认使用provider ctyun中的az_name或环境变量中的CTYUN_AZ_NAME
- `copies_count` (Number) 副本数量，当edition取值为OriginalMultipleReadLvs/StandardDual/DirectCluster/ClusterOriginalProxy时必填（取值范围2-6），当edition取其他值时不填。
- `cycle_count` (Number) 订购时长，该参数在cycle_type为month时才生效，当cycle_type=month，支持传递1、2、3、4、5、6、12、24、36
- `data_disk_type` (String) 磁盘类型，支持SAS和SSD，默认SAS
- `host_type` (String) 主机类型，默认S，X86取值：S：通用型、C：计算增强型、M：内存型、HS：海光通用型、HC：海光计算增强型，ARM取值：KS：鲲鹏通用型、KC：鲲鹏计算增强型
- `maintenance_time` (String) 实例维护时间窗口，总时长必须为2小时，默认：00:00-02:00，支持更新
- `project_id` (String) 企业项目ID，如果不填则默认使用provider ctyun中的project_id或环境变量中的CTYUN_PROJECT_ID
- `protection_status` (Boolean) 退订保护开关，默认为不保护，支持更新
- `region_id` (String) 资源池ID，如果不填则默认使用provider ctyun中的region_id或环境变量中的CTYUN_REGION_ID
- `secondary_az_name` (String) 备可用区
- `shard_count` (Number) 分片数量，当edition取值为DirectClusterSingle时: 3~256。当edition取值为DirectCluster时: 3~256。当edition取值为ClusterOriginalProxy时: 3~64。当edition取其他值时不填。
- `version` (String) 版本类型，SeriesInfo中的version值，支持BASIC和PLUS，默认BASIC

### Read-Only

- `id` (String) ID
- `master_order_id` (String) 主订单号
- `name` (String) 名称