# ctyun_elb_rule (Resource)
**详细说明请见文档：https://www.ctyun.cn/document/10026756/10032110**



## 样例

```terraform
terraform {
  required_providers {
    ctyun = {
      source = "ctyun-it/ctyun"
    }
  }
}

# 可参考index.md，在环境变量中配置ak、sk、资源池ID、可用区名称
provider "ctyun" {
  env = "prod"
}


resource "ctyun_vpc" "vpc_test" {
  name        = "tf-vpc-for-elb"
  cidr        = "192.168.0.0/16"
  description = "terraform测试使用"
  enable_ipv6 = true
}

resource "ctyun_subnet" "subnet_test" {
  vpc_id      = ctyun_vpc.vpc_test.id
  name        = "tf-subnet-for-elb"
  cidr        = "192.168.1.0/24"
  description = "terraform测试使用"
  dns = [
    "114.114.114.114",
    "8.8.8.8",
    "8.8.4.4"
  ]
}

resource "ctyun_elb_loadbalancer" "listener_test" {
  subnet_id     = ctyun_subnet.subnet_test.id
  name          = "tf-elb-for-listener"
  sla_name      = "elb.s2.small"
  resource_type = "internal"
  vpc_id        = ctyun_vpc.vpc_test.id
  cycle_type    = "month"
  cycle_count   = 1
}

resource "ctyun_elb_target_group" "test2" {
  name      = "tf-tg-for-target2_12"
  vpc_id    = ctyun_vpc.vpc_test.id
  algorithm = "wrr"
}

resource "ctyun_elb_rule" "rule_test" {
  listener_id = ctyun_elb_loadbalancer.listener_test.id
  conditions = [
    { "type" : "server_name", "condition_server_name" : "terraform-test.com" }
  ]
  action_type          = "forward"
  action_target_groups = [{target_group_id=ctyun_elb_target_group.test2.id}]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `action_type` (String) 默认规则动作类型。取值范围：forward、redirect，支持更新
- `conditions` (Attributes List) 匹配规则数据，支持更新 (see [below for nested schema](#nestedatt--conditions))
- `listener_id` (String) 监听器listener Id

### Optional

- `action_redirect_listener_id` (String) 重定向监听器ID，当action_type = redirect时，必填，支持更新
- `action_target_groups` (Attributes List) 后端服务组，支持更新 (see [below for nested schema](#nestedatt--action_target_groups))
- `az_name` (String) 可用区名称，如果不填则默认使用provider ctyun中的project_id或环境变量中的CTYUN_PROJECT_ID
- `description` (String) 支持拉丁字母、中文、数字, 特殊字符：~!@#$%^&*()_-+= <>?:'{},./;'[,]·~！@#￥%……&*（） —— -+={}，支持更新
- `project_id` (String) 企业项目ID，如果不填则默认使用provider ctyun中的project_id或环境变量中的CTYUN_PROJECT_ID
- `region_id` (String) 资源池Id，默认使用provider ctyun总region_id 或者环境变量

### Read-Only

- `created_time` (String) 创建时间，为UTC格式
- `id` (String) 转发规则 ID
- `load_balancer_id` (String) 负载均衡Id
- `status` (String) 状态: ACTIVE / DOWN
- `updated_time` (String) 更新时间，为UTC格式

<a id="nestedatt--conditions"></a>
### Nested Schema for `conditions`

Required:

- `condition_type` (String) 匹配规则类型。取值范围：server_name（服务名称）、url_path（匹配路径），支持更新

Optional:

- `condition_match_type` (String) 匹配类型。取值范围：ABSOLUTE，PREFIX，REG，支持更新
- `condition_server_name` (String) 服务名称,格式为：xxx.xxx结构，不支持下划线'_'。当type = server_name填写，支持更新
- `condition_url_paths` (String) 匹配路径。当type = url_path填写，支持更新


<a id="nestedatt--action_target_groups"></a>
### Nested Schema for `action_target_groups`

Required:

- `target_group_id` (String) 后端服务组ID，支持更新

Optional:

- `weight` (Number) 权重，取值范围：1-256。默认为100，支持更新