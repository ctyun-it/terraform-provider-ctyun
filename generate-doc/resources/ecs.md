# ctyun_ecs (Resource)
**详细说明请见文档：https://www.ctyun.cn/document/10026730**



## 样例

```terraform
terraform {
  required_providers {
    ctyun = {
      source = "www.ctyun.cn/ctyun/ctyun"
    }
  }
}

provider "ctyun" {
  region_id  = "bb9fdb42056f11eda1610242ac110002"
  project_id = "17a308cdf06a4a7ebfb27070a7b07e18"
  az_name    = "cn-huadong1-jsnj1A-public-ctcloud"
}

data "ctyun_images" "image_test1" {
  name       = "Ubuntu 22.04"
  visibility = "public"
  page_no    = 1
  page_size  = 50
}

data "ctyun_ecs_flavors" "ecs_flavor_test1" {
  cpu    = 1
  ram    = 1
  arch   = "x86"
  series = "S"
  type   = "CPU_S7"
}

# 创建1c1g x86架构的通用型云主机，系统盘使用SATA，40g，计费方式为包周期1个月，到期自动续费
resource "ctyun_ecs" "ecs_test1" {
  name               = "ecs-test"
  flavor_id          = data.ctyun_ecs_flavors.ecs_flavor_test1.flavors[0].id
  image_id           = data.ctyun_images.image_test1.images[0].id
  system_disk_type   = "sata"
  system_disk_size   = 40
  vpc_id             = "vpc-r7kv00qbz5"
  password           = "P@ssW0rd_1"
  cycle_type         = "month"
  cycle_count        = 1
  auto_renew         = true
  subnet_id          = "subnet-f3ktwpsf07"
  security_group_ids = [
  ]
}

#########################################################################################

data "ctyun_images" "image_test2" {
  name       = "Ubuntu 22.04"
  visibility = "public"
  page_no    = 1
  page_size  = 50
  region_id  = "200000002527"
  az_name    = "cn-jx-nc5-jxnc1A-public-ctcloud"
}

data "ctyun_ecs_flavors" "ecs_flavor_test2" {
  cpu       = 2
  ram       = 4
  arch      = "x86"
  series    = "S"
  type      = "CPU_S7"
  region_id = "200000002527"
  az_name   = "cn-jx-nc5-jxnc1A-public-ctcloud"
}

# 创建2c4g x86架构的通用型云主机，系统盘使用SATA，50g，计费方式为按需
resource "ctyun_ecs" "ecs_test2" {
  name               = "ecs-test2"
  flavor_id          = data.ctyun_ecs_flavors.ecs_flavor_test2.flavors[0].id
  image_id           = data.ctyun_images.image_test2.images[0].id
  system_disk_type   = "sata"
  system_disk_size   = 50
  vpc_id             = "vpc-d7zxz8j05c"
  password           = "P@ssW0rd_1"
  cycle_type         = "on_demand"
  subnet_id          = "subnet-5jtwyd0m15"
  security_group_ids = [
    "sg-p5gue21vy8"
  ]
  key_pair_name = "keypair-test"
  region_id     = "200000002527"
  az_name       = "cn-jx-nc5-jxnc1A-public-ctcloud"
  project_id    = "4f5ef15300724760af59b37cf6409f45"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cycle_type` (String) 订购周期类型，取值范围：month：按月，year：按年、on_demand：按需。当此值为month或者year时，cycle_count为必填
- `flavor_id` (String) 规格id，请用ctyun_ecs_flavors查询具体id
- `image_id` (String) 镜像id
- `name` (String) 云主机名称，不可以使用已存在的云主机名称，长度2-63，允许使用大小写字符和数字和-，不能以-开始和结尾以及连续出现，不能使用纯数字
- `subnet_id` (String) 主网卡的子网id
- `system_disk_size` (Number) 系统盘大小，单位为G，取值范围：[40, 32768]
- `system_disk_type` (String) 系统盘类型，sata：普通IO，sas：高IO，ssd：超高IO，ssd-genric：通用型SSD，fast-ssd：极速型SSD
- `vpc_id` (String) 虚拟私有云id，在多可用区类型资源池下，vpcID通常为“vpc-”开头，非多可用区类型资源池vpcID为uuid格式

### Optional

- `auto_renew` (Boolean) 是否自动续订，true：自动续订，false：不自动续订；注意：此参数在包周期情况下才有效；当为包周期时此值默认为true
- `az_name` (String) 可用区id，如果不填则默认使用provider ctyun中的az_name或环境变量中的CTYUN_AZ_NAME
- `cycle_count` (Number) 订购时长，该参数在cycle_type为month或year时才生效，当cycleType=month，支持续订1-11个月；当cycleType=year，支持续订1-5年
- `key_pair_name` (String) 密钥对名称
- `password` (String, Sensitive) 用户密码，满足以下规则：长度在8～30个字符；必须包含大写字母、小写字母、数字以及特殊符号中的三项；特殊符号可选：()`~!@#$%^&*_-+=|{}[]:;'<>,.?/\且不能以斜线号/开头
- `project_id` (String) 企业项目id，如果不填则默认使用provider ctyun中的project_id或环境变量中的CTYUN_PROJECT_ID
- `region_id` (String) 资源池id，如果不填则默认使用provider ctyun中的region_id或环境变量中的CTYUN_REGION_ID
- `security_group_ids` (Set of String) 安全组id列表，在多可用区类型资源池下，安全组ID通常以“sg-”开头，非多可用区类型资源池安全组ID为uuid格式；默认使用默认安全组，无默认安全组情况下请填写该参数

### Read-Only

- `default_security_group_id` (String) 默认加入安全组id
- `expire_time` (String) 到期时间
- `fixed_ip` (String) 主网卡固定子网的ip地址，不填则自动返回加入子网后的ip地址
- `id` (String) id
- `master_order_id` (String) 订购的受理单id
- `status` (String) 云主机状态，取值范围：backingup: 备份中，creating: 创建中，expired: 已到期，freezing: 冻结中，rebuild: 重装，restarting: 重启中，running: 运行中，starting: 开机中，stopped: 已关机，stopping: 关机中，error: 错误，snapshotting: 快照创建中，unsubscribed: 包周期已退订，unsubscribing: 包周期退订中
- `system_disk_id` (String) 系统盘的id